
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0xKNOTHING - The Ultimate Meme Token of Nothingness</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <style>
        :root {
            --primary-color: #e63946; /* A vibrant red */
            --secondary-color: #457b9d; /* A muted blue */
            --dark-background: #1a1a1a;
            --light-text: #f1faee;
            --accent-green: #00ff80;
            --void-black: #000000;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: var(--dark-background);
            color: var(--light-text);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            line-height: 1.6;
            background-image: url('images/void_pattern.png'); /* Subtle void pattern */
            background-repeat: repeat;
            background-size: 100px 100px;
        }

        /* Global animations for chaos mode */
        @keyframes voidShift {
            0% { background-position: 0% 0%; }
            25% { background-position: 10% 10%; }
            50% { background-position: 0% 0%; }
            75% { background-position: -10% -10%; }
            100% { background-position: 0% 0%; }
        }

        /* Particle effects */
        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            width: 5px;
            height: 5px;
            animation: floatAndFade 20s infinite ease-in-out;
            opacity: 0;
        }

        @keyframes floatAndFade {
            0% { transform: translateY(100vh) translateX(0); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1; /* Ensure content is above particles */
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.95), rgba(0, 0, 0, 0.95));
            border-bottom: 2px solid var(--primary-color);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        header h1 {
            font-family: 'Orbitron', monospace;
            font-size: 3.5rem;
            color: var(--primary-color);
            text-shadow: 0 0 15px rgba(230, 57, 70, 0.7);
            margin-bottom: 10px;
            letter-spacing: 5px;
        }

        header p {
            font-size: 1.2rem;
            color: var(--light-text);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }

        .web3-section {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            padding: 20px;
            gap: 20px;
            background: rgba(26, 26, 26, 0.9);
            border-bottom: 1px solid var(--secondary-color);
            margin-bottom: 20px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .web3-status, .web3-balance {
            background-color: rgba(0, 0, 0, 0.6);
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 1rem;
            color: var(--light-text);
            text-align: center;
        }

        .web3-status span, .web3-balance span {
            color: var(--accent-green);
            font-weight: bold;
        }

        .web3-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(230, 57, 70, 0.4);
        }

        .web3-btn:hover {
            background-color: #ff6b7a;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(230, 57, 70, 0.6);
        }

        .web3-btn:disabled {
            background-color: #555;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        /* Countdown Timer */
        .countdown-section {
            text-align: center;
            margin: 30px auto;
            padding: 20px;
            background: rgba(17, 17, 17, 0.8);
            border: 1px dashed #555;
            border-radius: 15px;
            max-width: 600px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
        }
        .countdown-section h3 {
            color: var(--accent-green);
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .countdown-timer {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(230, 57, 70, 0.6);
            letter-spacing: 2px;
        }
        .countdown-section p {
            margin-top: 15px;
            font-size: 0.95rem;
            color: #aaa;
        }

        /* New Buy/Sell Interface (inspired by LILPEPE) */
        .buy-sell-container {
            background: rgba(17, 17, 17, 0.9);
            border: 1px solid #e63946;
            border-radius: 15px;
            padding: 30px;
            margin: 40px auto;
            max-width: 500px;
            box-shadow: 0 0 30px rgba(230, 57, 70, 0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .lp-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 20px;
            align-items: center;
        }
        .lp-header h2 {
            font-family: 'Orbitron', monospace;
            color: #e63946;
            font-size: 2rem;
            margin: 0;
            text-shadow: 0 0 10px rgba(230, 57, 70, 0.5);
        }
        .lp-header .stage-box {
            background: #ffc107; /* Yellow */
            color: #000;
            padding: 8px 15px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.2rem;
            font-family: 'Orbitron', monospace;
        }

        .lp-price-info {
            background: rgba(0, 0, 0, 0.5);
            border: 1px dashed #555;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 25px;
            width: 100%;
            text-align: center;
        }
        .lp-price-info p {
            margin: 5px 0;
            font-size: 1.1rem;
            color: #ccc;
        }
        .lp-price-info .highlight {
            color: var(--accent-green); /* Green for prices */
            font-weight: bold;
        }
        .lp-price-info .stage-price {
            font-size: 1.4rem;
            color: #ffc107; /* Yellow for stage price */
        }

        .lp-progress-bar {
            width: 100%;
            height: 20px;
            background-color: #333;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 25px;
            border: 1px solid var(--primary-color);
        }
        .lp-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #ff6b7a);
            width: 0%; /* Controlled by JS */
            border-radius: 10px 0 0 10px;
            transition: width 0.5s ease-out;
        }

        .lp-stats {
            width: 100%;
            margin-bottom: 30px;
        }
        .lp-stat-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1rem;
            color: #aaa;
        }
        .lp-stat-line span.value {
            color: #eee;
            font-weight: bold;
        }

        .lp-input-group {
            width: 100%;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .lp-input-row {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #0d0d0d;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 10px;
        }
        .lp-input-row input {
            flex-grow: 1;
            background: none;
            border: none;
            color: #eee;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            padding: 5px;
            text-align: right;
        }
        .lp-input-row input:focus {
            outline: none;
        }
        .lp-input-row .currency-select {
            background: #222;
            color: #eee;
            border: 1px solid #555;
            padding: 8px 12px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            cursor: pointer;
        }
        .lp-input-row .max-btn {
            background: #444;
            color: #eee;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            transition: background 0.2s ease;
        }
        .lp-input-row .max-btn:hover {
            background: #666;
        }
        .lp-input-row .token-display {
            background: #1a1a1a;
            color: var(--accent-green); /* Green for token */
            padding: 8px 12px;
            border-radius: 8px;
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .lp-connect-button {
            width: 100%;
            background: linear-gradient(135deg, var(--primary-color), #ff6b7a);
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(230, 57, 70, 0.3);
            margin-bottom: 20px;
        }
        .lp-connect-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(230, 57, 70, 0.4);
        }
        .lp-connect-button.connected {
            background: linear-gradient(135deg, #007bff, #0056b3); /* Blue for connected state */
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
            cursor: default;
        }
        .lp-connect-button.connected:hover {
            transform: none;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }


        .lp-footer-buttons {
            display: flex;
            justify-content: space-around;
            width: 100%;
            gap: 15px;
        }
        .lp-footer-buttons button {
            flex-grow: 1;
            background: #333;
            color: #ccc;
            border: 1px solid #555;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            transition: all 0.2s ease;
        }
        .lp-footer-buttons button:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        /* Price Chart Section */
        .price-chart-section {
            background: rgba(17, 17, 17, 0.9);
            border: 1px solid var(--secondary-color);
            border-radius: 15px;
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
        }

        .price-chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .price-chart-header h3 {
            font-family: 'Orbitron', monospace;
            color: var(--accent-green);
            font-size: 1.8rem;
            margin: 0;
        }
        .price-chart-header .current-price-display {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--light-text);
        }
        .price-chart-header .current-price-display span {
            color: var(--primary-color);
            font-weight: bold;
        }
        .price-chart-header .price-change {
            font-size: 1.1rem;
            color: var(--accent-green); /* Green for positive change */
            margin-left: 10px;
        }
        .price-chart-placeholder {
            background-color: #000;
            border: 1px dashed #444;
            height: 300px; /* Placeholder height */
            display: flex;
            justify-content: center;
            align-items: center;
            color: #777;
            font-size: 1.5rem;
            border-radius: 10px;
        }

        /* Stats Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 40px auto;
            padding: 20px;
        }

        .stat-card {
            background: rgba(17, 17, 17, 0.9);
            border: 1px solid var(--secondary-color);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
        }

        .stat-card h4 {
            font-family: 'Orbitron', monospace;
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .stat-card p {
            font-size: 1.1rem;
            color: var(--light-text);
            margin: 0;
        }

        .stat-card .value {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--accent-green);
            font-weight: bold;
        }

        /* Meme Wall */
        .meme-wall-section {
            background: rgba(17, 17, 17, 0.9);
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            padding: 30px;
            margin: 40px auto;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
        }

        .meme-wall-section h2 {
            font-family: 'Orbitron', monospace;
            text-align: center;
            color: var(--primary-color);
            font-size: 2.2rem;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(230, 57, 70, 0.5);
        }

        .meme-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .meme-card {
            background-color: #0d0d0d;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .meme-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4);
        }

        /* NFT Card Specific Styles (for the new NFT look) */
        .nft-card-content {
            background-color: #111;
            border: 1px solid #333;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .nft-image-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1 / 1; /* Make it a square */
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: #222; /* Placeholder background if image loading fails */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: #555;
            font-family: 'Orbitron', monospace;
        }

        .nft-image-container img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .nft-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
            color: var(--primary-color);
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .nft-info {
            color: #eee;
        }

        .nft-collection {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #ccc;
        }

        .nft-price {
            font-size: 0.95rem;
            margin-bottom: 10px;
            color: #aaa;
        }

        .nft-price .price-value {
            color: var(--accent-green);
            font-weight: bold;
        }

        .meme-actions button {
            background-color: #333;
            color: #eee;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85rem;
            margin: 5px;
            transition: background-color 0.2s ease;
        }

        .meme-actions button:hover {
            background-color: var(--primary-color);
        }

        .meme-votes {
            font-size: 0.8rem;
            color: #777;
            margin-top: 10px;
        }

        /* Most Nonsensical Meme */
        .top-meme-display {
            text-align: center;
            font-size: 1.2rem;
            color: var(--accent-green);
            margin-top: 30px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            border: 1px dashed #555;
        }

        /* NFT Minting Section */
        .nft-mint-section {
            background: rgba(17, 17, 17, 0.9);
            border: 1px solid var(--secondary-color);
            border-radius: 15px;
            padding: 30px;
            margin: 40px auto;
            max-width: 600px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        .nft-mint-section h2 {
            font-family: 'Orbitron', monospace;
            color: var(--accent-green);
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 128, 0.5);
        }

        .current-nft-display {
            margin-top: 20px;
            padding: 15px;
            border: 1px dashed #444;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.4);
            display: inline-block;
        }

        .current-nft-display img {
            max-width: 150px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 2px solid #555;
        }

        .current-nft-display p {
            font-size: 1rem;
            color: #ccc;
        }

        .nft-status {
            margin-top: 20px;
            font-size: 0.9rem;
            color: #aaa;
        }

        /* Voidpaper Section */
        .voidpaper-section {
            background: rgba(17, 17, 17, 0.9);
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: 0 0 30px rgba(230, 57, 70, 0.3);
            display: none; /* Hidden by default */
        }

        .voidpaper-section h2 {
            font-family: 'Orbitron', monospace;
            color: var(--primary-color);
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 25px;
            text-shadow: 0 0 10px rgba(230, 57, 70, 0.5);
        }

        .voidpaper-section h3 {
            color: var(--accent-green);
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 10px;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }

        .voidpaper-section p, .voidpaper-section ul {
            color: #ccc;
            font-size: 1.05rem;
            margin-bottom: 15px;
        }

        .voidpaper-section ul {
            list-style-type: '— ';
            padding-left: 20px;
        }

        .voidpaper-section li {
            margin-bottom: 8px;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.95), rgba(0, 0, 0, 0.95));
            border-top: 2px solid var(--primary-color);
            margin-top: 50px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
        }

        footer p {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 10px;
        }

        .social-links a {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin: 0 10px;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .social-links a:hover {
            color: #ff6b7a;
        }

        /* Popup */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-content {
            background: var(--dark-background);
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 0 30px rgba(230, 57, 70, 0.5);
        }

        .popup-content h3 {
            color: var(--primary-color);
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .popup-content p {
            color: var(--light-text);
            font-size: 1.1rem;
            margin-bottom: 30px;
        }

        .popup-buttons button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.05rem;
            margin: 0 10px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .popup-buttons button:hover {
            background-color: #ff6b7a;
            transform: translateY(-2px);
        }

        /* Message Scroll Box */
        .message-scroll-box {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #555;
            border-radius: 10px;
            padding: 15px;
            height: 200px;
            overflow-y: scroll;
            margin: 20px auto;
            max-width: 800px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .message-scroll-box::-webkit-scrollbar {
            width: 8px;
        }

        .message-scroll-box::-webkit-scrollbar-track {
            background: #333;
            border-radius: 10px;
        }

        .message-scroll-box::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .message-scroll-box::-webkit-scrollbar-thumb:hover {
            background: #ff6b7a;
        }

        .message-line {
            color: #bbb;
            font-size: 0.9rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .message-line::before {
            content: '>';
            color: var(--accent-green);
            margin-right: 8px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2.5rem;
            }
            header p {
                font-size: 1rem;
            }
            .web3-section {
                flex-direction: column;
            }
            .countdown-timer {
                font-size: 2rem;
            }
            .lp-header h2 {
                font-size: 1.5rem;
            }
            .lp-header .stage-box {
                font-size: 1rem;
                padding: 6px 10px;
            }
            .lp-price-info p {
                font-size: 0.9rem;
            }
            .lp-input-row input, .lp-input-row .currency-select, .lp-input-row .max-btn, .lp-input-row .token-display {
                font-size: 0.9rem;
            }
            .lp-connect-button {
                font-size: 1rem;
                padding: 12px 20px;
            }
            .lp-footer-buttons {
                flex-direction: column;
                gap: 10px;
            }
            .lp-footer-buttons button {
                font-size: 0.85rem;
            }
            .price-chart-header h3 {
                font-size: 1.4rem;
            }
            .price-chart-header .current-price-display {
                font-size: 1.2rem;
            }
            .stats-section {
                grid-template-columns: 1fr;
            }
            .meme-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            .nft-overlay {
                font-size: 2rem;
            }
            .popup-content {
                padding: 20px;
            }
            .popup-content h3 {
                font-size: 1.5rem;
            }
            .popup-content p {
                font-size: 1rem;
            }
            .popup-buttons button {
                padding: 10px 20px;
                font-size: 0.95rem;
            }
        }
    </style>
</head>
<body>
    <div id="particles"></div>

    <header>
        <h1>0xKNOTHING</h1>
        <p>The anti-utility token. No purpose. No roadmap. Pure, unadulterated nothingness. Invest your hopes and dreams here to see them vanish.</p>
    </header>

    <div class="container">
        <section class="web3-section">
            <button id="connectWalletBtn" class="web3-btn" onclick="connectWallet()">CONNECT WALLET</button>
            <div id="walletInfo" class="web3-status" style="display: none;">
                Wallet: <span id="walletAddress">Not Connected</span><br>
                Balance: <span id="walletBalance">0.0000</span> ETH<br>
                KNOT: <span id="knotBalance">0 KNOT</span>
            </div>
            <p id="lpStatusMessage" class="web3-status" style="border: none; background: none; color: #ffc107; font-size: 0.9rem;"></p>
        </section>

        <section class="countdown-section">
            <h3>Time Until Meaningless Reset</h3>
            <div class="countdown-timer" id="countdownDisplay">00:00:00</div>
            <p>Every day, the void reshapes itself. Don't expect anything different.</p>
        </section>

        <section class="buy-sell-container">
            <div class="lp-header">
                <h2 id="lpTokenName">KNOTHING</h2>
                <div class="stage-box" id="currentStage">Stage ∞</div>
            </div>

            <div class="lp-price-info">
                <p>Next Stage Price: <span class="highlight stage-price" id="nextStagePrice">$0.00000000</span></p>
                <p>1 KNOTHING = <span class="highlight" id="knottingPrice">$0.00000000</span></p>
            </div>

            <div class="lp-stats">
                <div class="lp-stat-line">
                    <span>USD Raised:</span>
                    <span class="value" id="usdRaised">$0 / $∞</span>
                </div>
                <div class="lp-stat-line">
                    <span>Tokens Sold:</span>
                    <span class="value" id="tokensSold">0 / ∞</span>
                </div>
            </div>

            <div class="lp-progress-bar">
                <div class="lp-progress-fill" id="progressFill" style="width: 0%;"></div>
            </div>

            <div class="lp-input-group">
                <div class="lp-input-row">
                    <input type="number" id="buyInputAmount" placeholder="0.0" min="0" step="0.000001" disabled>
                    <select id="buyCurrencySelect" class="currency-select" disabled>
                        <option value="ETH">ETH</option>
                        <option value="USDT">USDT</option>
                        <option value="CARD">CARD</option>
                    </select>
                </div>
                <div class="lp-input-row">
                    <button class="max-btn" id="maxAmountBtn" disabled>Max</button>
                    <input type="text" id="receiveTokenAmount" value="0" readonly disabled>
                    <span class="token-display">KNOT</span>
                </div>
            </div>

            <button class="lp-connect-button" id="lpConnectWalletBtn" onclick="connectWallet()">CONNECT WALLET</button>

            <div class="lp-footer-buttons">
                <button id="howToBuyBtn">HOW TO BUY NOTHING</button>
                <button id="burnToVoidBtn">BURN TO VOID</button> <button id="giveawayBtn">+777K MEANINGLESS GIVEAWAY</button>
            </div>
        </section>

        <section class="message-scroll-box" id="messageScroll">
            </section>

        <section class="price-chart-section">
            <div class="price-chart-header">
                <h3>KNOTHING Price Chart (Live, but fake)</h3>
                <div class="current-price-display">
                    Current Price: <span id="currentKnotPrice">$0.00000068</span>
                    <span id="priceChangePercent" class="price-change">+∞%</span>
                </div>
            </div>
            <div class="price-chart-placeholder">
                <p>No real data here. Just random fluctuations.</p>
            </div>
        </section>

        <section class="stats-section">
            <div class="stat-card">
                <h4>Market Cap</h4>
                <p id="marketCap" class="value">Undefined</p>
            </div>
            <div class="stat-card">
                <h4>24h Volume</h4>
                <p id="volume24h" class="value">Tears of Regret</p>
            </div>
            <div class="stat-card">
                <h4>Holders</h4>
                <p id="holdersCount" class="value">Nobody + You</p>
            </div>
            <div class="stat-card">
                <h4>LP Status</h4>
                <p id="lpVolume" class="value">0.000000 LP (Glitchy Pool)</p>
            </div>
            <div class="stat-card">
                <h4>Last Activity</h4>
                <p id="lastActivity" class="value">Block ??? - Random Event (0x...)</p>
            </div>
            <div class="stat-card">
                <h4>Current Price</h4>
                <p id="currentPrice" class="value">$0.00000068</p>
            </div>
        </section>

        <section class="meme-wall-section">
            <h2>The Wall of Nonsense NFTs</h2>
            <div class="meme-grid" id="memeGrid">
                </div>
            <div class="top-meme-display" id="mostNonsensicalMeme">
                Most Nonsensical Meme Today: "My Brain Cell Count"
            </div>
        </section>

        <section class="nft-mint-section">
            <h2>Mint Your Own Nothing NFT</h2>
            <p>Embrace the void. Own a piece of digital non-existence. Each NFT is a unique representation of futility.</p>
            <button id="mintNftBtn" class="web3-btn" onclick="mintNft()" disabled>Mint A Nothing NFT (Cost: Gas Fees + Your Sanity)</button>
            <div class="current-nft-display">
                <img id="currentNftImage" src="https://via.placeholder.com/100/333333/FFFFFF?text=NFT" alt="Your Minted NFT">
                <p id="currentNftText">Your NFT: Nothing yet. Connect wallet to see your future regret.</p>
            </div>
            <p id="nftMintStatus" class="nft-status">Ready to waste your gas...</p>
        </section>

        <section class="voidpaper-section" id="voidpaperSection">
            <h2>The Voidpaper (or lack thereof)</h2>
            <p>Welcome, seeker of truth, to the Voidpaper. A document meticulously crafted to explain absolutely nothing about 0xKNOTHING. Our philosophy is simple: there is no philosophy. Our technology is groundbreaking: it doesn't exist. Our community is thriving: in their own heads.</p>

            <h3>1. Introduction to the Abyss</h3>
            <p>0xKNOTHING is not a cryptocurrency. It is not a meme coin. It is not even a concept. It is the digital embodiment of that nagging feeling in the back of your mind that everything is meaningless. We've tokenized the void, and frankly, we're not sure why.</p>

            <h3>2. Non-existent Tokenomics</h3>
            <ul>
                <li>Total Supply: ∞ (It grows as fast as your disappointment)</li>
                <li>Burn Mechanism: Every transaction burns a small piece of your hope.</li>
                <li>Staking: You can stake your tokens, and we'll stake ours that you'll gain nothing.</li>
                <li>Liquidity: As volatile as your life choices.</li>
                <li>Utility: Less than zero. This token actively subtracts utility from your life.</li>
            </ul>

            <h3>3. The Anti-Roadmap (or The Road to Nowhere)</h3>
            <p>Our roadmap is a blank canvas, perfectly reflecting our commitment to going nowhere. We plan to achieve absolutely nothing, consistently, for an indefinite period. Key milestones include:</p>
            <ul>
                <li>**Q3 2025: Continue to exist (maybe).**</li>
                <li>**Q4 2025: Fail to launch any meaningful partnerships.**</li>
                <li>**2026: Further decentralize the feeling of despair.**</li>
                <li>**Future: Achieve ultimate oblivion.**</li>
                <li>**Forever: Continue to be nothing.**</li>
            </ul>

            <h3>4. Our Non-existent Team</h3>
            <p>Our team is comprised of highly experienced individuals in the art of doing nothing. We are anonymous, not because we fear regulations, but because we fear accountability. We are passionate about... well, we're not passionate about anything really.</p>

            <h3>5. Join the Void (Don't)</h3>
            <p>Don't join our community. Don't invest. Don't believe the hype (there isn't any). Just observe the nothingness, and perhaps, find a strange comfort in its absolute pointlessness.</p>

            <p style="text-align: center; margin-top: 30px; font-style: italic;">Thank you for wasting your time reading the Voidpaper. You're now one step closer to embracing true Nothingness.</p>
        </section>

        <button class="web3-btn" onclick="toggleVoidpaper()" style="display: block; margin: 30px auto;">READ THE VOIDPAPER</button>
    </div>

    <footer>
        <p>&copy; 2025 0xKNOTHING. All rights reserved. (We think. Who cares anyway?)</p>
        <div class="social-links">
            <a href="#" target="_blank">X</a> |
            <a href="#" target="_blank">Telegram</a> |
            <a href="#" target="_blank">Discord</a>
        </div>
    </footer>

    <div id="actionPopup" class="popup-overlay">
        <div class="popup-content">
            <h3 id="popupTitle">Confirm Action</h3>
            <p id="popupMessage">Are you sure you want to perform this action?</p>
            <div class="popup-buttons">
                <button id="popupConfirmBtn">Confirm</button>
                <button onclick="hidePopup()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Global Web3 variables
        let provider, signer, userAddress;
        let isWalletConnected = false;
        let currentKnotBalance = 0; // Initialize KNOT balance
        let stakedKnot = 0; // Initialize staked KNOT (if still used elsewhere)
        let totalUsdRaised = 0;
        let totalTokensSold = 0;
        const usdGoal = 1000000; // Example goal
        const tokensGoal = 1000000000; // Example goal

        let currentStage = parseInt(localStorage.getItem('0xknothing_currentStage')) || 1; // Start stage, load from localStorage
        let knotPrice = calculateKnotPrice(currentStage); // Calculate price based on stage

        // Function to calculate KNOT price based on stage
        function calculateKnotPrice(stage) {
            // Stage 1: 0.00000001
            // Stage 2: 0.00000002
            // Stage 3: 0.00000004
            // ... exponential increase, then slow down, then random large jumps
            if (stage <= 10) {
                return 0.00000001 * Math.pow(2, stage - 1);
            } else if (stage <= 20) {
                return 0.00000001 * Math.pow(2, 9) + (stage - 10) * 0.00000005; // Slower linear increase after stage 10
            } else {
                // After stage 20, prices become more erratic or symbolic
                const basePrice = 0.00000001 * Math.pow(2, 9) + 10 * 0.00000005;
                // Introduce random jumps and resets
                const randomFactor = Math.random();
                if (randomFactor < 0.3) return basePrice * (1 + Math.random() * 0.5); // Upward jump
                if (randomFactor < 0.6) return basePrice * (0.5 + Math.random() * 0.5); // Downward swing
                if (randomFactor < 0.8) return Math.random() * 0.00001; // Small random value
                return Infinity; // Price to infinity sometimes
            }
        }


        // Meme data (for the new NFT look)
        const memes = [
            {
                id: 'nft404_1',
                collection: 'The Void Collection',
                number: '#4?4',
                price: '∞ KNOT (Coming Never)',
                mintText: 'Mint Confusion',
                img: 'images/nft_placeholder.png', // Placeholder image (create this file)
                votes: 0
            },
            {
                id: 'misspelled_∞',
                collection: 'Misspelled Dreams',
                number: '#∞',
                price: 'Your Soul (Sold Out)',
                mintText: 'Soul Not Found',
                img: 'images/nft_placeholder_alert.png', // Placeholder image (create this file)
                votes: 0
            },
            {
                id: 'oxknothing_0',
                collection: '0xKNOTHING Original',
                number: '#0000',
                price: '0.000 ETH (Not for sale)',
                mintText: 'Mint Nothing (Unavailable)',
                img: 'images/nft_placeholder_void.png', // Placeholder image (create this file)
                votes: 0
            },
            {
                id: 'nft404_2',
                collection: 'The Void Collection',
                number: '#404',
                price: 'Ξ ??? (Maybe)',
                mintText: 'Attempt Mint?',
                img: 'images/nft_placeholder_question.png', // Placeholder image (create this file)
                votes: 0
            },
            // Add more NFTs in the same format
            {
                id: 'lost_cause',
                collection: 'Lost Cause Series',
                number: '#500',
                price: '1.000 ETH (Not For You)',
                mintText: 'Mint Disappointment',
                img: 'images/nft_placeholder_cross.png', // Placeholder image (create this file)
                votes: 0
            },
            {
                id: 'digital_dust',
                collection: 'Digital Dust',
                number: '#999',
                price: 'FREE (But Costly)',
                mintText: 'Claim Your Dust',
                img: 'images/nft_placeholder_dust.png', // Placeholder image (create this file)
                votes: 0
            }
        ];


        document.addEventListener("DOMContentLoaded", function () {
            // Create floating particles
            function createParticles() {
                const container = document.getElementById("particles");
                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement("div");
                    particle.className = "particle";
                    particle.style.left = Math.random() * 100 + "%";
                    particle.style.animationDelay = Math.random() * 20 + "s";
                    particle.style.animationDuration = (15 + Math.random() * 10) + "s";
                    container.appendChild(particle);
                }
            }
            createParticles();

            // Dynamic countdown logic (Real-time)
            function updateRealtimeCountdown() {
                const now = new Date();
                const bangkokTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Bangkok' }));

                const endOfDay = new Date(bangkokTime);
                endOfDay.setHours(23, 59, 59, 999);

                let timeLeft = endOfDay.getTime() - bangkokTime.getTime();

                if (timeLeft <= 0) {
                    // Reset for the next day immediately
                    const nextDay = new Date(bangkokTime);
                    nextDay.setDate(bangkokTime.getDate() + 1);
                    nextDay.setHours(23, 59, 59, 999);
                    timeLeft = nextDay.getTime() - bangkokTime.getTime();

                    // Increment stage and update price
                    currentStage++;
                    localStorage.setItem('0xknothing_currentStage', currentStage); // Save to localStorage
                    knotPrice = calculateKnotPrice(currentStage); // Recalculate price for new stage
                    updateLPInterface(); // Update the LP section immediately

                    updateLPStatus(`Stage transitioned to Stage ${currentStage}! Embrace the new level of nothingness.`);
                    appendRandomMessage();
                }

                let hours = Math.floor(timeLeft / (1000 * 60 * 60));
                let minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                let seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                document.getElementById("countdownDisplay").textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }

            setInterval(updateRealtimeCountdown, 1000);
            updateRealtimeCountdown();

            // Enhanced message system with Web3 integration
            const messages = [
                "There is no plan. There never was.", "You're waiting for something that will never come.",
                "No utility. No purpose. Just vibes of emptiness.", "Even this message means nothing.",
                "Stay unready. Stay unknowing.", "You came here for meaning? That's cute.",
                "The real value is in the absolute void.", "We KNOT what we're doing. Do you?",
                "Imagine a meme. Now delete it. That's us.", "0xKNOTHING: not even trying since never.",
                "This isn't a launch. It's a slow descent into madness.", "Not a rug. Not a moon. Not even a thing.",
                "Spelled wrong. Built worse. Loved by none.", "The community asked for nothing. We delivered.",
                "Tokenomics: Take your money, return confusion.", "Our marketing budget: $0.00. Our effort: Even less.",
                "Join us in the eternal loop of disappointment.", "We're not early. We're not late. We're KNOT.",
                "The only guarantee: You'll question your choices.", "Built different. Built wrong. Built to confuse.",
                "This is what happens when devs give up.", "No promises made. All promises broken anyway.",
                "Your bags are empty. Your soul will be too.", "We tied your expectations in a knot. Get it?",
                "The void stares back. It's also confused.", "Not your keys, not your coins, not our problem.",
                "Web3 innovation: Making nothing from nothing.", "Gas fees higher than our token price.",
                "Smart contract? More like confused contract.", "Metamask connected. Intelligence disconnected.",
                "Minting nothing for something. Genius.", "Your transaction failed successfully.",
                "Liquidity locked. Logic unlocked.", "DEX listed us by mistake. We stayed.",
                "Rug pull? We pulled the entire floor.", "Beware of the void, it's contagious.",
                "You're still here? Why?", "Congratulations, you've achieved peak pointlessness."
            ];

            function appendRandomMessage() {
                const container = document.getElementById("messageScroll");
                const msg = document.createElement("div");
                msg.className = "message-line";
                msg.textContent = messages[Math.floor(Math.random() * messages.length)];
                container.appendChild(msg);
                while (container.children.length > 20) {
                    container.removeChild(container.firstChild);
                }
                container.scrollTop = container.scrollHeight;
            }

            for (let i = 0; i < 3; i++) {
                setTimeout(appendRandomMessage, i * 1000);
            }
            setInterval(appendRandomMessage, 4000);

            // Simulate price changes for other stats
            setInterval(updateStats, 10000);
            updateStats(); // Initial call

            // Populate meme wall with new NFT structure
            const memeGrid = document.getElementById('memeGrid');
            memes.forEach(meme => {
                const memeCard = document.createElement('div');
                memeCard.className = 'meme-card';
                memeCard.innerHTML = `
                    <div class="nft-card-content">
                        <div class="nft-image-container">
                            <img src="${meme.img}" alt="${meme.collection} ${meme.number}">
                            <div class="nft-overlay">${meme.number}</div>
                        </div>
                        <div class="nft-info">
                            <div class="nft-collection">${meme.collection}</div>
                            <div class="nft-price">Price: <span class="price-value">${meme.price}</span></div>
                            <div class="meme-actions">
                                <button onclick="voteMeme('${meme.id}')">This means NOTHING</button>
                                <button onclick="mintMemeNft('${meme.id}')">${meme.mintText}</button>
                            </div>
                            <div class="meme-votes" id="votes-${meme.id}">Votes: ${meme.votes}</div>
                        </div>
                    </div>
                `;
                memeGrid.appendChild(memeCard);
            });
            updateMostNonsensicalMeme();
            setInterval(updateMostNonsensicalMeme, 30000);

            // Initialize the new Buy/Sell interface
            updateLPInterface();
            setInterval(updateLPInterface, 5000); // Update stage/price/progress every 5 seconds

            document.getElementById('buyInputAmount').addEventListener('input', calculateReceiveAmount);
            document.getElementById('buyCurrencySelect').addEventListener('change', calculateReceiveAmount);
            document.getElementById('maxAmountBtn').addEventListener('click', setMaxBuyAmount);
            // lpConnectWalletBtn's initial click handler is connectWallet(),
            // it will be updated to showPopup('lpBuy') after successful connection.

            // Add handlers for new footer buttons
            document.getElementById('howToBuyBtn').addEventListener('click', () => {
                updateLPStatus("Buying Nothing: Step 1: Realize you're buying nothing. Step 2: Question your life. Step 3: Click 'Connect Wallet' (if you dare).");
                appendRandomMessage();
            });
            document.getElementById('giveawayBtn').addEventListener('click', () => {
                updateLPStatus("Congratulaions! You just won... nothing! As expected. No gas fees required!");
                appendRandomMessage();
            });
            // Add event listener for Burn button
            document.getElementById('burnToVoidBtn').addEventListener('click', () => {
                if (!isWalletConnected) {
                    updateLPStatus("Connect wallet first to burn your nothing!");
                    return;
                }
                showPopup('burn'); // Call popup for burn confirmation
            });

            connectWallet(); // Simulate Wallet connection on page load
        });

        // Web3 Functions - MODIFIED
        async function connectWallet() {
            isWalletConnected = true;
            userAddress = "0xDummyWalletAddressXXXXXXXXXXXXXXXX";
            const dummyBalance = "1.2345";

            document.getElementById("walletAddress").textContent = userAddress.slice(0, 6) + "..." + userAddress.slice(-4);
            document.getElementById("walletBalance").textContent = parseFloat(dummyBalance).toFixed(4);
            document.getElementById("walletInfo").style.display = "block";

            // Update the new connect button
            const lpConnectBtn = document.getElementById('lpConnectWalletBtn');
            lpConnectBtn.textContent = "Connected to Void";
            lpConnectBtn.disabled = false; // Keep it enabled to trigger the buy popup
            lpConnectBtn.classList.add('connected'); // Add class for styling if needed
            lpConnectBtn.onclick = () => showPopup('lpBuy'); // Change onclick to trigger buy popup

            enableLPButtons(); // Enable input and other buttons
            updateLPStatus("Wallet connected (simulated). Ready to waste your existence.");
            updateNftMintStatus("Wallet connected (simulated). Ready to mint your void.");
            appendRandomMessage();
        }

        function enableLPButtons() {
            document.getElementById('buyInputAmount').disabled = false;
            document.getElementById('buyCurrencySelect').disabled = false;
            document.getElementById('maxAmountBtn').disabled = false;
            document.getElementById('receiveTokenAmount').disabled = false;
            // Any other buttons that should be enabled after wallet connect
            document.getElementById('mintNftBtn').disabled = false;
            document.getElementById('mintNftBtn').classList.add('web3-btn'); // Add web3 button styling
            document.getElementById('mintNftBtn').style.cursor = 'pointer';
        }

        // --- New LP Interface Functions ---
        function updateLPInterface() {
            // currentStage and knotPrice are now managed by countdown logic
            let nextStagePrice = knotPrice * (1 + 0.1 * Math.random()); // 10-20% higher for next stage

            document.getElementById("currentStage").textContent = `Stage ${currentStage}`;

            // Handle Infinity price for display
            if (knotPrice === Infinity) {
                document.getElementById("nextStagePrice").textContent = `$∞ (Impossible)`;
                document.getElementById("knottingPrice").textContent = `$∞`;
            } else {
                document.getElementById("nextStagePrice").textContent = `$${nextStagePrice.toFixed(8)}`;
                document.getElementById("knottingPrice").textContent = `$${knotPrice.toFixed(8)}`;
            }

            // Simulate USD Raised and Tokens Sold
            // These should also be somewhat tied to currentStage, but with more randomness
            totalUsdRaised = Math.floor(currentStage * 10000 + Math.random() * 50000); // Example increase
            totalTokensSold = Math.floor(currentStage * 100000000 + Math.random() * 500000000); // Example increase

            document.getElementById("usdRaised").textContent = `$${totalUsdRaised.toLocaleString()} / $∞`; // Goal can be infinite
            document.getElementById("tokensSold").textContent = `${totalTokensSold.toLocaleString()} / ∞`; // Goal can be infinite

            // Update progress bar - maybe remove if goal is infinite or make it always 0-100% of a stage
            const progressWithinStage = (currentStage % 1) * 100; // Simplified for "nothing" concept
            document.getElementById("progressFill").style.width = `${Math.min(100, progressWithinStage).toFixed(2)}%`; // Cap at 100%
            // Or, for a more "nothing" feel, make it completely random
            // document.getElementById("progressFill").style.width = `${(Math.random() * 100).toFixed(2)}%`;

            calculateReceiveAmount(); // Update KNOT amount when prices change
        }

        function calculateReceiveAmount() {
            const inputAmount = parseFloat(document.getElementById('buyInputAmount').value);
            if (isNaN(inputAmount) || inputAmount <= 0) {
                document.getElementById('receiveTokenAmount').value = 0;
                return;
            }

            // For simplicity, assume 1 ETH = $2000, 1 USDT = $1, CARD = $0.5
            const selectedCurrency = document.getElementById('buyCurrencySelect').value;
            let usdEquivalent = 0;
            switch (selectedCurrency) {
                case 'ETH':
                    usdEquivalent = inputAmount * 2000; // Simulated ETH price
                    break;
                case 'USDT':
                    usdEquivalent = inputAmount * 1;
                    break;
                case 'CARD':
                    usdEquivalent = inputAmount * 0.5; // Simulated CARD price
                    break;
            }

            let receivedKnot;
            if (knotPrice === Infinity || knotPrice === 0) {
                receivedKnot = 0; // Can't buy if price is infinite or zero
            } else {
                receivedKnot = usdEquivalent / knotPrice;
            }
            document.getElementById('receiveTokenAmount').value = receivedKnot.toLocaleString(undefined, { maximumFractionDigits: 0 }); // No decimals for KNOT
        }

        function setMaxBuyAmount() {
            // Simulate max amount based on dummy wallet balance
            const selectedCurrency = document.getElementById('buyCurrencySelect').value;
            let maxAmount = 0;

            // Use dummyBalance from connectWallet
            const dummyEthBalance = parseFloat(document.getElementById("walletBalance").textContent);

            switch (selectedCurrency) {
                case 'ETH':
                    maxAmount = dummyEthBalance;
                    break;
                case 'USDT':
                    maxAmount = dummyEthBalance * 2000; // Assume all ETH can be converted to USDT
                    break;
                case 'CARD':
                    maxAmount = dummyEthBalance * 4000; // Assume all ETH can be converted to CARD
                    break;
            }
            document.getElementById('buyInputAmount').value = maxAmount.toFixed(4);
            calculateReceiveAmount();
        }

        // --- Modified Mint/NFT/Stat/Meme Functions (Use new status function) ---
        function updateLPStatus(message) { // New status display for the buy/sell section
            document.getElementById("lpStatusMessage").textContent = message;
            // Optionally, append to the general message scroll box as well
            // appendRandomMessage();
        }

        async function mintNft() { // Existing NFT mint, just ensure status updates
            if (!isWalletConnected) {
                updateNftMintStatus("Connect wallet first to mint a Nothing NFT!");
                return;
            }
            updateNftMintStatus("Minting Nothing NFT... This will certainly waste your gas...");

            setTimeout(() => {
                const txHash = "0x" + Math.random().toString(16).substr(2, 64);
                const nftNames = ["Void Fragment", "Eternal Echo", "Quantum Blankness", "Unseen Horizon", "Zero Point Entity", "The Invisible Pixel"];
                const randomNftName = nftNames[Math.floor(Math.random() * nftNames.length)];
                document.getElementById('currentNftText').textContent = `Your NFT: "${randomNftName}"`;
                document.getElementById('currentNftImage').src = `https://via.placeholder.com/100/000000/FFFFFF?text=${encodeURIComponent(randomNftName.split(' ')[0])}`;

                updateNftMintStatus(`✔️ Nothing NFT minted! TX: ${txHash.slice(0, 10)}... Don't ask for a refund.`);
                appendRandomMessage();
            }, 2500 + Math.random() * 1500);
        }

        function updateNftMintStatus(message) {
            document.getElementById("nftMintStatus").textContent = message;
        }


        function updateStats() { // Existing stats update
            // Price is handled by simulated price in chart
            const marketCaps = ["Undefined", "Negative", "404 Not Found", "NaN", "Imaginary", "Void"];
            document.getElementById("marketCap").textContent = marketCaps[Math.floor(Math.random() * marketCaps.length)];

            const volumes = ["Emotional Damage", "Tears of Regret", "Lost Dreams", "Wasted Time", "Pure Disappointment", "Existential Crisis"];
            document.getElementById("volume24h").textContent = volumes[Math.floor(Math.random() * volumes.length)];

            const holderCounts = ["Nobody + You", "Just You", "You + Your Alt", "2 Bots", "Error: NaN", "Everyone's Mom"];
            document.getElementById("holdersCount").textContent = holderCounts[Math.floor(Math.random() * holderCounts.length)];

            const lpVolume = (Math.random() * 0.0001).toFixed(6);
            const lpStates = ["Glitchy Pool", "Broken Pool", "Empty Pool", "Non-Existent Pool"];
            document.getElementById("lpVolume").textContent = `${lpVolume} LP (${lpStates[Math.floor(Math.random() * lpStates.length)]})`;

            const randomBlock = Math.floor(Math.random() * 99999999) + 10000000;
            const activityTypes = ["Mint", "Burn", "Transfer", "Swap"];
            const randomActivity = activityTypes[Math.floor(Math.random() * activityTypes.length)];
            const randomTxHashPart = Math.random().toString(16).substr(2, 8);
            document.getElementById("lastActivity").textContent = `Block ${randomBlock} - ${randomActivity} (0x${randomTxHashPart}...)`;
        }

        // Voidpaper toggle
        function toggleVoidpaper() {
            const voidpaper = document.getElementById('voidpaperSection');
            if (voidpaper.style.display === 'block') {
                voidpaper.style.display = 'none';
            } else {
                voidpaper.style.display = 'block';
                voidpaper.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Meme voting and NFT minting
        function voteMeme(memeId) {
            const meme = memes.find(m => m.id === memeId);
            if (meme) {
                meme.votes++;
                document.getElementById(`votes-${meme.id}`).textContent = `Votes: ${meme.votes}`;
                appendRandomMessage();
                updateLPStatus(`You voted for "${meme.collection} ${meme.number}". Your meaninglessness score increased.`);
            }
        }

        function mintMemeNft(memeId) { // Existing meme NFT mint, just ensure status updates
            if (!isWalletConnected) {
                updateNftMintStatus("Connect wallet to mint this nonsensical NFT!");
                return;
            }
            const meme = memes.find(m => m.id === memeId);
            if (meme) {
                updateNftMintStatus(`Minting "${meme.collection} ${meme.number}" NFT... Preparing to waste your gas...`);
                setTimeout(() => {
                    const txHash = "0x" + Math.random().toString(16).substr(2, 64);
                    updateNftMintStatus(`✔️ Successfully minted "${meme.collection} ${meme.number}" NFT! TX: ${txHash.slice(0, 10)}... What a waste.`);
                    document.getElementById('currentNftImage').src = meme.img;
                    document.getElementById('currentNftText').textContent = `Your minted NFT: "${meme.collection} ${meme.number}"`;
                    appendRandomMessage();
                }, 2500 + Math.random() * 1500);
            }
        }

        function updateMostNonsensicalMeme() { // Existing top meme update
            if (memes.length === 0) return;
            let topMeme = memes[0];
            memes.forEach(meme => {
                if (meme.votes > topMeme.votes) {
                    topMeme = meme;
                }
            });

            const topMemeDisplay = document.getElementById('mostNonsensicalMeme');
            if (topMeme.votes > 0) {
                 topMemeDisplay.textContent = `Most Nonsensical NFT Today: "${topMeme.collection} ${topMeme.number}" (Votes: ${topMeme.votes})`;
            } else {
                const defaultMemes = ["Silence is Golden, Duct Tape is Silver", "The Cat Staring at Nothing", "My Brain Cell Count"];
                topMemeDisplay.textContent = `Most Nonsensical Meme Today: "${defaultMemes[Math.floor(Math.random() * defaultMemes.length)]}"`;
            }
        }

        // --- Real-time Price Simulation (for chart)
        let currentSimulatedPrice = 0.00000068; // Starting price
        const priceDisplay = document.getElementById("currentKnotPrice");
        const priceChangePercentDisplay = document.getElementById("priceChangePercent");

        function updateSimulatedPrice() {
            const fluctuation = (Math.random() - 0.5) * 0.00000001;
            currentSimulatedPrice += fluctuation;
            currentSimulatedPrice = Math.max(0.00000001, Math.min(0.00000100, currentSimulatedPrice));
            priceDisplay.textContent = `$${currentSimulatedPrice.toFixed(8)}`;
            priceChangePercentDisplay.textContent = `+∞%`; // Always positive for fun
            const statsPriceDisplay = document.getElementById("currentPrice");
            if (statsPriceDisplay) {
                statsPriceDisplay.textContent = `$${currentSimulatedPrice.toFixed(8)}`;
            }
        }
        setInterval(updateSimulatedPrice, 1000);
        updateSimulatedPrice();

        // Easter egg: Konami code for extra chaos
        let konamiCode = [];
        const konami = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
        document.addEventListener('keydown', function(e) {
            konamiCode.push(e.keyCode);
            if (konamiCode.length > konami.length) {
                konamiCode.shift();
            }
            if (konamiCode.length === konami.length && konamiCode.every((val, i) => val === konami[i])) {
                activateChaosMode();
                konamiCode = [];
            }
        });

        function activateChaosMode() { // Existing chaos mode
            updateLPStatus("🎮 CHAOS MODE ACTIVATED! The void welcomes you!");
            document.body.style.animation = "voidShift 0.1s infinite";
            setTimeout(() => {
                document.body.style.animation = "voidShift 20s ease-in-out infinite";
            }, 3000);
            const container = document.getElementById("particles");
            for (let i = 0; i < 100; i++) {
                const particle = document.createElement("div");
                particle.className = "particle";
                particle.style.left = Math.random() * 100 + "%";
                particle.style.background = "#e63946";
                particle.style.animationDuration = (1 + Math.random() * 3) + "s";
                container.appendChild(particle);
                setTimeout(() => particle.remove(), 5000);
            }
            for (let i = 0; i < 10; i++) {
                setTimeout(appendRandomMessage, i * 200);
            }
        }

        // Auto-update wallet balance periodically
        setInterval(async () => {
            if (isWalletConnected && provider && userAddress) {
                try {
                } catch (error) {
                    console.error("Failed to update balance:", error);
                }
            }
        }, 30000);

        // Network change detection
        if (window.ethereum) {
            window.ethereum.on('chainChanged', (chainId) => {
                updateLPStatus("Network changed! We're still confused.");
                setTimeout(() => {
                    updateLPStatus("Ready to waste gas on any network...");
                }, 3000);
            });
            window.ethereum.on('accountsChanged', (accounts) => {
                if (accounts.length === 0) {
                    updateLPStatus("Wallet disconnected. Probably for the best.");
                    isWalletConnected = false;
                    document.getElementById("walletInfo").style.display = "none";
                    const lpConnectBtn = document.getElementById('lpConnectWalletBtn');
                    lpConnectBtn.textContent = "CONNECT WALLET";
                    lpConnectBtn.disabled = false;
                    lpConnectBtn.classList.remove('connected');
                    lpConnectBtn.onclick = () => connectWallet(); // Reset onclick to connect

                    // Disable input and other buttons
                    document.getElementById('buyInputAmount').disabled = true;
                    document.getElementById('buyCurrencySelect').disabled = true;
                    document.getElementById('maxAmountBtn').disabled = true;
                    document.getElementById('receiveTokenAmount').disabled = true;
                    document.getElementById('mintNftBtn').disabled = true;
                    document.getElementById('mintNftBtn').classList.remove('web3-btn');
                    document.getElementById('mintNftBtn').style.cursor = 'not-allowed';

                } else {
                    updateLPStatus("Account changed. New victim acquired.");
                    connectWallet();
                }
            });
        }

        // --- Popup Functions (Modified for LP Buy and Burn) ---
        let currentAction = '';
        let currentAmount = 0;
        let currentCurrency = '';

        function showPopup(actionType) {
            let title = '';
            let message = '';
            let actionFunction;

            currentAction = actionType;

            if (actionType === 'lpBuy') {
                const inputAmount = parseFloat(document.getElementById('buyInputAmount').value);
                const currency = document.getElementById('buyCurrencySelect').value;
                const receiveKnot = parseFloat(document.getElementById('receiveTokenAmount').value.replace(/,/g, '')); // Remove commas for parsing

                if (!isWalletConnected) {
                    updateLPStatus("Connect wallet first to buy nothing!");
                    return;
                }

                if (isNaN(inputAmount) || inputAmount <= 0) {
                    updateLPStatus(`Please enter a valid amount to buy.`);
                    return;
                }
                if (isNaN(receiveKnot) || receiveKnot <= 0) {
                    updateLPStatus(`Please enter a valid amount. Cannot calculate KNOT received.`);
                    return;
                }

                currentAmount = inputAmount;
                currentCurrency = currency;
                const formattedReceiveKnot = receiveKnot.toLocaleString();

                title = 'Confirm Buy KNOTHING';
                message = `Are you sure you want to spend <span style="color:#00ff80;">${inputAmount.toLocaleString()} ${currency}</span> to buy <span style="color:#00ff80;">${formattedReceiveKnot} KNOTHING</span>?`;
                actionFunction = () => processLPBuy(inputAmount, currency, receiveKnot);
            } else if (actionType === 'burn') { // <-- เพิ่มส่วนนี้
                title = 'Burn KNOTHING to the Void';
                message = `Are you absolutely sure you want to burn your KNOTHING tokens into the eternal void? There is no return. Just... nothing.`;
                actionFunction = () => burnToVoid();
            } else {
                // Fallback or other actions if they were re-introduced. For now, this branch might not be used.
                console.warn("Unsupported action type for popup:", actionType);
                return;
            }

            document.getElementById('popupTitle').textContent = title;
            document.getElementById('popupMessage').innerHTML = message;
            document.getElementById('actionPopup').style.display = 'flex';

            const confirmBtn = document.getElementById('popupConfirmBtn');
            confirmBtn.onclick = () => {
                hidePopup();
                actionFunction();
            };
        }

        function hidePopup() {
            document.getElementById('actionPopup').style.display = 'none';
        }

        async function processLPBuy(amount, currency, receivedKnot) {
            updateLPStatus(`Initiating purchase of ${receivedKnot.toLocaleString()} KNOTHING with ${amount.toLocaleString()} ${currency}...`);
            appendRandomMessage();

            setTimeout(() => {
                const txHash = "0x" + Math.random().toString(16).substr(2, 64);
                currentKnotBalance += receivedKnot;
                document.getElementById("knotBalance").textContent = `${currentKnotBalance.toLocaleString()} KNOT`;
                totalUsdRaised += (amount * (currency === 'ETH' ? 2000 : (currency === 'USDT' ? 1 : 0.5))); // Add to simulated raised USD
                totalTokensSold += receivedKnot; // Add to simulated tokens sold
                updateLPInterface(); // Update the LP interface immediately

                updateLPStatus(`✔️ Successfully bought ${receivedKnot.toLocaleString()} KNOTHING! TX: ${txHash.slice(0, 10)}... Welcome to the void.`);
                appendRandomMessage();
            }, 2500 + Math.random() * 1500);
        }

        async function burnToVoid() {
            if (currentKnotBalance === 0) {
                updateLPStatus("You have no KNOTHING to burn! It's already nothing.");
                appendRandomMessage();
                return;
            }

            updateLPStatus(`Preparing to burn ${currentKnotBalance.toLocaleString()} KNOTHING... Feeling lighter already?`);
            appendRandomMessage();

            setTimeout(() => {
                const burnedAmount = currentKnotBalance;
                currentKnotBalance = 0; // Set balance to 0 after burning
                document.getElementById("knotBalance").textContent = `${currentKnotBalance.toLocaleString()} KNOT`;

                const txHash = "0x" + Math.random().toString(16).substr(2, 64);
                updateLPStatus(`✔️ Successfully burned ${burnedAmount.toLocaleString()} KNOTHING to the void! TX: ${txHash.slice(0, 10)}... You achieved ultimate nothingness.`);
                appendRandomMessage();
            }, 2500 + Math.random() * 1500);
        }

        // Initial connection setup for lpConnectWalletBtn
        // This is handled inside connectWallet() now.
    </script>
</body>
</html>
